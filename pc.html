<!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<!-- スタイルシートを指定 -->
<link href="style.css" rel="stylesheet" type="text/css">

<title lang="ja">Taichi Okumura</title>
</head>

<!-- ここから本文 -->
<body>

<!-- トップ -->

<h1>パソコン設定</h1>

<div>
<a href="index.html">ホーム</a> |
<a href="#2017">2017年</a>
</div>

<hr>

<!-- コンテンツ -->

<!-- テンプレート 
<a href="" target="_blank">ここ</a>
-->

<h2 id="2017">2017年</h2>

<h3>macOS SierraにインストールしたVirtualBox上のUbuntu 16.04にlatexをインストール</h3>
<p><a href="http://qiita.com/SUZUKI_Masaya/items/7d2f15b3d959326db023" target="_blank">ここ</a>を参照。</p>
<pre>
$ sudo add-apt-repository ppa:jonathonf/texlive
$ sudo apt update
$ sudo apt upgrade
$ sudo apt install texlive-lang-cjk
</pre>

<del>
<h3>macOS Sierraにplastexをインストール</h3>
<p>まず，<a href="https://github.com/tiarno/plastex" target="_blank">ここ</a>を参照。INSTALLを読めといっているので，<a href="https://github.com/tiarno/plastex/blob/master/INSTALL" target="_blank">ここ</a>でINSTALLを読む。</p>

<p>LaTeX，ghostscript，dvipngはインストール済みであることを確認。
Python Imaging Libraryがイントールされていなかった。
</p>

<p>作業ディレクトリとして<code>/usr/loral/bin</code>に移動。<a href="http://www.pythonware.com/products/pil/#pil117" target="_blank">ここ</a>からPython Imaging Library 1.1.7 Source Kitをダウンロードし，<code>/usr/loral/bin</code>にコピー。<a href="https://python.dogrow.net/blog43/" target="_blank">ここ</a>を参照して
<pre>
 tar zxf Imaging-1.1.7.tar.gz
 cd Imaging-1.1.7
 sudo python setup.py install
</pre>
を実行。
</p>

<p>
libpngが入っていないとダメだったような気がしたので，<code>which libpng</code>とやっても反応はない。ただ，マシンにはlibpngに関連するファイルが沢山みつかったので，これをすべて消去した上で，再インストールすることにする。
<a href="http://www.libpng.org/pub/png/libpng.html" target="_blank">ここ</a>を参照し，libpng-1.6.32.tar.gzを入手。<code>/usr/local/bin</code>にコピーして，
<pre>
tar zxf libpng-1.6.32.tar.gz
cd libpng-1.6.32
</pre>
を実行。INSTALLファイルを参照し，
<pre>
./configure --prefix=/usr/local/bin
make check
sudo make install
</pre>
でインストール。
</p>

</del>


<h3>macOS Sierraにlatex2htmlをインストール</h3>

<p>MacTeXはインストールずみ。<a href="http://www.geidai.ac.jp/~marui/dont_forget/node3.html#SECTION00036000000000000000" target="_blank">ここ</a>に従ってインストールを実行。
	<p>まず，<code>/usr/local/bin</code> に移動し，<code> brew install netpbm</code> を実行したところで
<pre>
Error: Could not link:
/usr/local/share/man/man1/brew.1

Please delete these paths and run `brew update`.
Error: Could not link:
/usr/local/share/doc/homebrew
</pre>
なるエラーが発生。
そこで，<a href="http://qiita.com/armorik83/items/de7c5a5a8785de6ea815" target="_blank">ここ</a>に従って<code>brew uninstall --force brew-cask; brew update</code> を実行。
</p>

	<p>次に，<code>./configure --prefix=/usr/local --with-kanji=utf8</code> を実行したところで
	<pre>
Warning: Could not determine GS_LIB path.
         Ghostscript may not work due to missing startup files.
         You need to set the value of GS_LIB manually in cfgcache.pm.
Hint:    Search for the file 'gs_init.ps'. This directory and the 'fonts'
         directory (usually same level) should be set in GS_LIB.
         Separate the entries with the ":" character. The current
         directory "." should be included, too.
checking for pnmcrop -verbose ... no
checking for pnmcrop -verbose ... no
	</pre>
なるエラーが発生。そこで，<a href="http://rmecab.jp/wiki/index.php?%C6%FC%CF%BF2008_1%B7%EE" target="_blank">ここ</a>に従って，<code>./config/config.pl</code>を編集する。Ghostscriptは<code>/usr/local/bin/gs</code> というファイルで存在しており，バージョン9.21だったことから，
<pre>
    # my @gs_devs;
    my @gs_devs=qw(pnmraw ppmraw);
    my @gs_lib_path;
    # my $gs_version;
    my $gs_version=9.21; 
</pre>
<pre>
        # my $gs_lib = 0;
        # my $gs_fonts = 0;
        my $gs_lib = 1;
        my $gs_fonts = 1;
</pre>
のように編集。
</p>

<p>
	当初は<code>/Users/okumurin</code>で作業していたのだが，インストールして<code>which latex2html</code>としても反応がなかった。
	<a href="http://takeno.iee.niit.ac.jp/~shige/TeX/latex2html/l2h-notice.html#20060316-1" target="_blank">ここ</a>によると，パス名に空白や日本語が含まれているとエラーが起こるらしく，<code>/usr/local/bin</code> で作業をした次第。
	</p>
	
	<p>それでも出て来るエラーは<a href="http://d.hatena.ne.jp/earth2001y/20041031/p3">ここ</a>を参照して<code>alias latex2html='latex2html -notransparent' </code>で対処したが，これでは数式の背景が灰色になってしまう。そこで，<code>alias latex2html='latex2html -transparent' </code>に戻した上で，<a href="https://oku.edu.mie-u.ac.jp/tex/mod/forum/discuss.php?d=1612&parent=9346">ここ</a>を参照して<code>export RGBDEF=/usr/local/share/lib/latex2html/styles/rgb.txt </code>を実行。これでようやく実行できるようになった。</p>
	<p>かならず，platex -> dvips -> latex2html の順に実行すること。
		</p>

<h3>macOS SierraにVirtual Boxを使ってUbuntu 16.4をインストール</h3>
<p><a href="http://www.morinao-freelan.com/entry/2016/02/26/Mac%E3%81%ABVirtualBox%E3%81%A8Ubuntu%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%BC%E3%83%AB%E3%81%97%E3%81%A6%E3%81%BF%E3%81%9F" target="_blank">ここ</a>を参照。しかし，VBoxLinuxAddition.runが実行できない。<p>
	<p><a href="https://www.hiroom2.com/2016/05/07/virtualbox%E4%B8%8A%E3%81%AEubuntu-16-04%E3%81%ABguest-additions%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B/" target="_blank">ここ</a>にある「カーネルヘッダのインストール」を行ってから，<a href="http://d.hatena.ne.jp/x76789/20131002/1380664591" target="_blank">ここ</a>を参考にGuest Additionのインストールをすることで解像度の調整ができた。具体的には，
	<ol>
	<li>ゲストOSをシャットダウン</li>
	<li>Virtual Box マネージャの「設定」→「ストレージ」</li>
	<li>右側パネルの「コントローラ：IDE」→「VBoxGuestAdditions.iso」を選択</li>
	<li>右側パネルの「属性」の右側にあるCDマークのボタンを押し，「仮想ドライブからディスクを消去」をクリック</li>
	<li>ゲストOSを再起動</li>
	<li>「VirtualBox VM」の「デバイス」→「Guest Additions CDイメージの挿入」をクリック</li>
	<li>あとは，ダイアログに従って「実行」をクリックすればよし</li>
	</ol>
とする。
</p>

<p>さらに，ここにSSHで接続できるように設定する。<a href="http://tenten0213.hatenablog.com/entry/2013/10/15/232600" target="_blank">ここ</a>を参考に設定し，Ubuntuにopenssh-serverをインストールしようとするが，
<pre>
E: ロック /var/lib/dpkg/lock が取得できませんでした
</pre>
なるエラーが出てくる。
<a href="http://qiita.com/koara-local/items/e63b7e4ff3cea803bdea" target="_blank">ここ</a>を参考にUbuntuの端末で<code>$sudo rm /var/lib/dpkg/lock
</code>を実行し，再度openssh-serverをインストール。<code>$ssh okumura@localhost -p 2222</code>で接続できた。</p>


<hr>

<!-- 下部 -->
<!--#config timefmt="%Y" -->
<address>Copyright &copy; 2009-<!--#flastmod file="index.html" --> Taichi Okumura All rights reserved. </address>

</body>
<!-- 本文ここまで -->

</html>